<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.81.0" />
    <meta name="description" content="">


    <link rel="icon" href="../../images/favicon.png" type="image/png">

    <title>6. Embedded Signals :: App Development</title>

    
    <link href="../../css/nucleus.css?1676456832" rel="stylesheet">
    <link href="../../css/fontawesome-all.min.css?1676456832" rel="stylesheet">
    <link href="../../css/hybrid.css?1676456832" rel="stylesheet">
    <link href="../../css/featherlight.min.css?1676456832" rel="stylesheet">
    <link href="../../css/perfect-scrollbar.min.css?1676456832" rel="stylesheet">
    <link href="../../css/auto-complete.css?1676456832" rel="stylesheet">
    <link href="../../css/atom-one-dark-reasonable.css?1676456832" rel="stylesheet">
    <link href="../../css/theme.css?1676456832" rel="stylesheet">
    <link href="../../css/devselector.css?1676456832" rel="stylesheet">
    <link href="../../css/hugo-theme.css?1676456832" rel="stylesheet">
    <link href="../../css/theme-kul.css?1676456832" rel="stylesheet">
    

    <script src="../../js/jquery-3.3.1.min.js?1676456832"></script>
    <script src="../../js/devselector.js?1676456832"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="../../android/signals/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a href="https://www.kuleuven.be/kuleuven/" target="_blank">
  <img src="../../images/kul.png" alt="KU Leuven" /><br/>
</a>
<a href="https://www.uhasselt.be/" target="_blank">
  <img src="../../images/uhasselt.svg" alt="UHasselt" id="uhlogo" />
</a>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="../../js/lunr.min.js?1676456832"></script>
<script type="text/javascript" src="../../js/auto-complete.js?1676456832"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/kuleuven-diepenbeek.github.io\/appdev-course\/";
    
</script>
<script type="text/javascript" src="../../js/search.js?1676456832"></script>

    
  </div>

    <div class="highlightable">

      <h3><a href="../../">Course Contents</a></h3>
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/android/" title="1. Android Essentials" class="dd-item
        parent
        
        
        ">
      <a href="../../android/">
          1. Android Essentials
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/android/activities/" title="1. Life Cycle - Activities" class="dd-item ">
        <a href="../../android/activities/">
        1. Life Cycle - Activities
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/android/intents/" title="2. Messaging - Intents" class="dd-item ">
        <a href="../../android/intents/">
        2. Messaging - Intents
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/android/fragments/" title="3. Complex layouts: Fragments" class="dd-item ">
        <a href="../../android/fragments/">
        3. Complex layouts: Fragments
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/android/views/" title="4. Complex layouts: Nested Views" class="dd-item ">
        <a href="../../android/views/">
        4. Complex layouts: Nested Views
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/android/data-storage/" title="5. Data Storage: File/Network" class="dd-item ">
        <a href="../../android/data-storage/">
        5. Data Storage: File/Network
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/android/signals/" title="6. Embedded Signals" class="dd-item active">
        <a href="../../android/signals/">
        6. Embedded Signals
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/android/security/" title="7. Security By Design" class="dd-item ">
        <a href="../../android/security/">
        7. Security By Design
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/lang/" title="2. Language &amp; Support Tools" class="dd-item
        
        
        
        ">
      <a href="../../lang/">
          2. Language &amp; Support Tools
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/lang/kotlin/" title="1. Kotlin programming: Essentials" class="dd-item ">
        <a href="../../lang/kotlin/">
        1. Kotlin programming: Essentials
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/lang/kotlin-advanced/" title="2. Kotlin programming: Advanced" class="dd-item ">
        <a href="../../lang/kotlin-advanced/">
        2. Kotlin programming: Advanced
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/lang/kotlin-examples/" title="3. Kotlin Examples/Exercises" class="dd-item ">
        <a href="../../lang/kotlin-examples/">
        3. Kotlin Examples/Exercises
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/lang/tdd/" title="4. Test Driven Development" class="dd-item ">
        <a href="../../lang/tdd/">
        4. Test Driven Development
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/lang/multiplatform/" title="5. Multiplatform Mobile dev." class="dd-item ">
        <a href="../../lang/multiplatform/">
        5. Multiplatform Mobile dev.
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/extra/" title="3. Extra info" class="dd-item
        
        
        
        ">
      <a href="../../extra/">
          3. Extra info
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/extra/install/" title="1. Installation Guide" class="dd-item ">
        <a href="../../extra/install/">
        1. Installation Guide
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/extra/faq/" title="2. Common Errors FAQ" class="dd-item ">
        <a href="../../extra/faq/">
        2. Common Errors FAQ
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/extra/links/" title="3. Links and Tutorials" class="dd-item ">
        <a href="../../extra/links/">
        3. Links and Tutorials
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/extra/project/" title="4. Project Information" class="dd-item ">
        <a href="../../extra/project/">
        4. Project Information
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/extra/demo/" title="5. Demo Project" class="dd-item ">
        <a href="../../extra/demo/">
        5. Demo Project
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://uhintra03.uhasselt.be/studiegidswww/opleidingsonderdeel.aspx?a=2021&amp;i=3291&amp;n=4&amp;t=01"><i class='fa fa-university'></i> ECTS Sheet</a>
              </li>
          
              <li>
                  <a class="padding" href="https://toledo.kuleuven.be/portal/"><i class='fa fa-university'></i> Toledo</a>
              </li>
          
              <li>
                  <a class="padding" href="https://github.com/kuleuven-diepenbeek/appdev-course/"><i class='fab fa-github'></i> Course Git Repository</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='../../'>Course Contents</a> > <a href='../../android/'>1. Android Essentials</a> > 6. Embedded Signals
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#how-to-access-sensor-data">How to access sensor data</a>
      <ul>
        <li><a href="#1-checking-for-capabilities">1. Checking for capabilities</a></li>
        <li><a href="#2-listening-to-data">2. Listening to data</a></li>
      </ul>
    </li>
    <li><a href="#types-of-sensors">Types of sensors</a>
      <ul>
        <li><a href="#gps-location-services">GPS: Location Services</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              6. Embedded Signals
            </h1>
          

        


<p>Smartphones typically come equipped with a lot of hardware trinkets: multiple camera lenses, bio-metric scanners, gyroscopes, light sensors, &hellip; Accessing these in your app might lead to inventive use. We&rsquo;ve already seen in the <a href="../../android/intents">intents chapter</a> that <em>implicit intents</em> are a good way to let other apps or the Android system itself handle the security issues involved with accessing these embedded signals. Some commonly used systems are even provided for you in the <code>ActivityResultContracts</code> class, such as <code>TakePicture</code> and <code>TakePicturePreview</code>.</p>
<p>An overview of sensor documentation is available at the <a href="https://developer.android.com/guide/topics/sensors">Android Developers docs: Sensors</a>.</p>
<h2 id="how-to-access-sensor-data">How to access sensor data</h2>
<h3 id="1-checking-for-capabilities">1. Checking for capabilities</h3>
<p>First off, not all phones are equal. That means you need to <strong>identify sensor capabilities</strong> before doing anything else! Also, depending on the Android API level, some sensors aren&rsquo;t available, so make sure to check (see <a href="https://developer.android.com/guide/topics/sensors/sensors_overview">this overview table</a>).</p>
<p>Since a &ldquo;Sensor&rdquo; is quite abstract, and there are many types of sensors available, the Android API offers a general, but direct, abstraction layer in the <code>android.hardware</code> package. Once you&rsquo;ve got a handle to the sensor, it is up to the developer to check values, such as:</p>
<ul>
<li><code>resolution</code></li>
<li><code>maximumRange</code></li>
<li><code>power</code></li>
<li><code>vendor</code></li>
<li><code>version</code></li>
<li>&hellip;</li>
</ul>
<p>For instance, in the example below, we first check whether Google&rsquo;s gravity sensor v3 is available. If not, we fall back to a general accelerometer. If not, perhaps an appropriate message to the end user should be displayed:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kt" data-lang="kt"><span style="color:#111">sensorManager</span> <span style="color:#111">=</span> <span style="color:#111">getSystemService</span><span style="color:#111">(</span><span style="color:#111">Context</span><span style="color:#111">.</span><span style="color:#111">SENSOR_SERVICE</span><span style="color:#111">)</span> <span style="color:#00a8c8">as</span> <span style="color:#111">SensorManager</span>

<span style="color:#00a8c8">if</span> <span style="color:#111">(</span><span style="color:#111">sensorManager</span><span style="color:#111">.</span><span style="color:#111">getDefaultSensor</span><span style="color:#111">(</span><span style="color:#111">Sensor</span><span style="color:#111">.</span><span style="color:#111">TYPE_GRAVITY</span><span style="color:#111">)</span> <span style="color:#f92672">!=</span> <span style="color:#00a8c8">null</span><span style="color:#111">)</span> <span style="color:#111">{</span>
    <span style="color:#00a8c8">val</span> <span style="color:#111">availableGravitySensors</span><span style="color:#111">:</span> <span style="color:#111">List</span><span style="color:#111">&lt;</span><span style="color:#111">Sensor</span><span style="color:#111">&gt;</span> <span style="color:#111">=</span> <span style="color:#111">sensorManager</span><span style="color:#111">.</span><span style="color:#111">getSensorList</span><span style="color:#111">(</span><span style="color:#111">Sensor</span><span style="color:#111">.</span><span style="color:#111">TYPE_GRAVITY</span><span style="color:#111">)</span>
    <span style="color:#00a8c8">val</span> <span style="color:#111">googlev3Sensor</span> <span style="color:#111">=</span> <span style="color:#111">availableGravitySensors</span><span style="color:#111">.</span><span style="color:#111">first</span> <span style="color:#111">{</span> <span style="color:#00a8c8">it</span><span style="color:#111">.</span><span style="color:#111">vendor</span><span style="color:#111">.</span><span style="color:#111">contains</span><span style="color:#111">(</span><span style="color:#d88200">&#34;Google LLC&#34;</span><span style="color:#111">)</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#00a8c8">it</span><span style="color:#111">.</span><span style="color:#111">version</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span> <span style="color:#111">}</span>
    <span style="color:#111">println</span><span style="color:#111">(</span><span style="color:#111">googlev3Sensor</span><span style="color:#111">.</span><span style="color:#111">maximumRange</span><span style="color:#111">)</span>
<span style="color:#111">}</span> <span style="color:#00a8c8">else</span> <span style="color:#111">{</span>
    <span style="color:#00a8c8">val</span> <span style="color:#111">acceleroSensor</span> <span style="color:#111">=</span> <span style="color:#111">sensorManager</span><span style="color:#111">.</span><span style="color:#111">getDefaultSensor</span><span style="color:#111">(</span><span style="color:#111">Sensor</span><span style="color:#111">.</span><span style="color:#111">TYPE_ACCELEROMETER</span><span style="color:#111">)</span>
    <span style="color:#00a8c8">if</span><span style="color:#111">(</span><span style="color:#111">acceleroSensor</span> <span style="color:#f92672">==</span> <span style="color:#00a8c8">null</span><span style="color:#111">)</span> <span style="color:#111">{</span>
        <span style="color:#75715e">// message to the user?
</span><span style="color:#75715e"></span>        <span style="color:#00a8c8">return</span>
    <span style="color:#111">}</span>
    <span style="color:#111">println</span><span style="color:#111">(</span><span style="color:#111">acceleroSensor</span><span style="color:#111">.</span><span style="color:#111">maximumRange</span><span style="color:#111">)</span>
<span style="color:#111">}</span>
</code></pre></div><p>The sensor manager is actually a high-level interface that hides a lot of low-level details, such as kernel drivers that access the hardware itself. The Android app communicates with the framework, which lie on top of the sensor kernel-drivers, which operate the hardware:</p>
<p><figure>
	<a href="../../img/sensors.jpg" data-featherlight="image">
		<img src="../../img/sensors.jpg"   title="Source: slideshare.net, Chinmay VS, Sensors on Android">
	</a>
	
		<figcaption>Source: slideshare.net, Chinmay VS, Sensors on Android</figcaption>
	
</figure>
</p>
<p>Besides runtime-checking, if publishing to Google Play, you can also prescribe the sensor requirements in the manifest file with a <code>&lt;uses-feature /&gt;</code> tag. See above the Android docs link for more information.</p>
<p>Sensor usage always comes in three steps:</p>
<ol>
<li>Get hold of the general <code>SensorManager</code></li>
<li>Check capabilities.</li>
<li>If successful, get and use a <code>Sensor</code> instance through the manager.</li>
</ol>
<h3 id="2-listening-to-data">2. Listening to data</h3>
<p>Once all is good to go, you can register a listener to the sensor, which requires the implementation of the <code>SensorEventListener</code> interface. It comes with two methods:</p>
<ol>
<li><code>onAccuracyChanged(sensor: Sensor, accuracy: Int)</code></li>
<li><code>onSensorChanged(event: SensorEvent)</code></li>
</ol>
<p>the <code>SensorEvent</code> object contains raw data (via the <code>values</code> property), sometimes up to three: one for each axis.</p>

<div class="notices note" ><p>Remember to register and unregister the event listener on the right moment. For activities, that would be in the <code>onResume</code> and <code>onPause</code> methods. Take the lifecycles of activities and fragments into account! By not unregistering, you are needlessly <strong>draining the battery</strong> of your end user!</p>
</div>

<p>When registering, you need to specify a delay: the <em>sampling rate</em> that, depending on the sensor and your needs, could differ from the default <code>SENSOR_DELAY_NORMAL</code>, which is about <code>200.000</code> microseconds:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kt" data-lang="kt"><span style="color:#111">sensorManager</span><span style="color:#111">.</span><span style="color:#111">registerListener</span><span style="color:#111">(</span><span style="color:#111">myListener</span><span style="color:#111">,</span> <span style="color:#111">mySensor</span><span style="color:#111">,</span> <span style="color:#111">SensorManager</span><span style="color:#111">.</span><span style="color:#111">SENSOR_DELAY_NORMAL</span><span style="color:#111">)</span>
</code></pre></div><p>If you would like to try this out in the emulator, be sure to go to the emulator settings, check the <strong>virtual sensors</strong> tab, and click on &ldquo;more sensors&rdquo;. Then, fiddle with the sliders, and voila: you&rsquo;re triggering <code>onSensorChanged</code> events:</p>
<p><figure>
	<a href="../../img/emulator-sensors.jpg" data-featherlight="image">
		<img src="../../img/emulator-sensors.jpg"  >
	</a>
	
</figure>
</p>
<p>See the <code>examples/kotlin/sensors</code> demo project for more information. <br/>In the example, pay special attention to the way sensor events are unit tested&mdash;it&rsquo;s a hassle!</p>
<h2 id="types-of-sensors">Types of sensors</h2>
<p>The Android docs categorizes different existing sensors into the following groups:</p>
<ol>
<li><strong>Motion</strong> sensors, such as:
<ul>
<li>Accelerometers: measures acceleration force</li>
<li>Gyroscopes: measures force of rotation</li>
<li>Gravity sensors: measures force of gravity</li>
<li>Step counters: measures the number of steps taken since the last reboot</li>
</ul>
</li>
<li><strong>Position</strong> sensors, such as:
<ul>
<li>Rotation vector component sensors</li>
<li>Magnetic fields: measure geomagnetic field strength</li>
<li>Orientation sensors: measure angles around x/y/z-axis</li>
<li>Proximity: distance from objects in cm</li>
</ul>
</li>
<li><strong>Environment</strong> sensors, such as:
<ul>
<li>Temperature sensors: measures ambient air or device temperature</li>
<li>Light sensors: measures illuminance</li>
<li>Pressure sensors:measures ambient air pressure</li>
<li>Humidity sensors: measures ambient relative humidity</li>
</ul>
</li>
</ol>
<p>The exact values of the <code>SensorEvent.values</code> vector can be consulted <a href="https://developer.android.com/guide/topics/sensors/sensors_motion">in the Anrdoid docs</a>. Details of usage, such as dimensions, mathematical representations, the calculation of angular speeds, and so forth are also available in the docs. A code sample called <a href="https://github.com/android/sensors-samples/tree/main/BatchStepSensor/">the batch step sensor</a> is available on GitHub.</p>
<p>Not all sensors return three-dimensional raw data. For instance, the light sensor only contains one value: illuminance, expressed in <code>lx</code>.</p>

<div class="notices note" ><p>Accessing the above sensors does <em>not</em> require special permissions. There are, however, restrictions. First, background processes (services like a WhatsApp push without having the app open) do not receive sensor change information. Next, some sensors are rate limited in some Android SDK versions. If you need refresh rates above <code>50 Hz</code>, you need the <code>HIGH_SAMPLING_RATE_SENSORS</code> permission. See the <a href="https://developer.android.com/guide/topics/sensors/sensors_overview">sensors overview Android docs</a> for more information.</p>
</div>

<h3 id="gps-location-services">GPS: Location Services</h3>
<p>Contrary to the above sensors, getting hold of the location of the user requires <strong>special permissions</strong> for obvious reasons. Since the GPS system is more heavily used than other sensors, it uses a more high-level, different API.</p>
<p>Read about <a href="https://developer.android.com/training/location">using locations on Android here</a>.</p>
<p>There are two kinds of &ldquo;location access categories&rdquo;:</p>
<ul>
<li>Foreground location: navigation apps, requesting location for GPS data on a picture, etc.</li>
<li>Background location: IoT apps that constantly track the location of the device.</li>
</ul>
<p>Both require different permissions and are accessed in different ways. For brevity, we will leave background location optional and up to the reader to discover.</p>
<h4 id="foreground-location-access">Foreground location access</h4>
<p>First, declare permissions in the manifest file, and determine whether or not you are content with <code>COARSE_LOCATION</code>, or you really must need <code>FINE_LOCATION</code>:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;uses-permission</span> <span style="color:#75af00">android:name=</span><span style="color:#d88200">&#34;android.permission.ACCESS_FINE_LOCATION&#34;</span> <span style="color:#f92672">/&gt;</span>
</code></pre></div><p>Then, after checking whether or not GPS is enabled, create a location manager, and register&mdash;again&mdash;an event listener, that implements <code>LocationListener</code>:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kt" data-lang="kt"><span style="color:#00a8c8">val</span> <span style="color:#111">locationManager</span> <span style="color:#111">=</span> <span style="color:#111">getSystemService</span><span style="color:#111">(</span><span style="color:#111">Context</span><span style="color:#111">.</span><span style="color:#111">LOCATION_SERVICE</span><span style="color:#111">)</span> <span style="color:#00a8c8">as</span> <span style="color:#111">LocationManager</span>
<span style="color:#00a8c8">if</span><span style="color:#111">(</span><span style="color:#111">locationManager</span><span style="color:#111">.</span><span style="color:#111">isProviderEnabled</span><span style="color:#111">(</span><span style="color:#111">LocationManager</span><span style="color:#111">.</span><span style="color:#111">GPS_PROVIDER</span><span style="color:#111">))</span> <span style="color:#111">{</span>
    <span style="color:#75715e">// option 1: more complex
</span><span style="color:#75715e"></span>    <span style="color:#111">locationManager</span><span style="color:#111">.</span><span style="color:#111">requestLocationUpdates</span><span style="color:#111">(</span><span style="color:#111">LocationManager</span><span style="color:#111">.</span><span style="color:#111">GPS_PROVIDER</span><span style="color:#111">,</span> <span style="color:#ae81ff">5000</span><span style="color:#111">,</span> <span style="color:#ae81ff">10</span><span style="color:#111">,</span> <span style="color:#111">myListener</span><span style="color:#111">)</span>
    <span style="color:#75715e">// option 2: only get the last location, a simple one-shot call
</span><span style="color:#75715e"></span>    <span style="color:#00a8c8">val</span> <span style="color:#111">location</span> <span style="color:#111">=</span> <span style="color:#111">locationManager</span><span style="color:#111">.</span><span style="color:#111">getLastKnownLocation</span><span style="color:#111">(</span><span style="color:#111">LocationManager</span><span style="color:#111">.</span><span style="color:#111">GPS_PROVIDER</span><span style="color:#111">)</span>
<span style="color:#111">}</span>
</code></pre></div><p>The simplest solution is using <code>getLastKnownLocation</code>. If a <code>GPS_PROVIDER</code> is not present, you can fall back to network triangulation by checking if the provider <code>LocationManager.NETWORK_PROVIDER</code> is enabled.</p>
<p>The <code>LocationListener</code> interface has a few methods, of which <code>onLocationChanged(location: Location)</code> is the most interesting, where you can pry out the <code>latitude</code> and <code>longitude</code> from the single argument. Note that this does <em>not</em> give you an address: for that, you&rsquo;ll need to create a <code>Geocoder</code> object, pass in a locale (<code>Locale.getDefault()</code>), and call <code>getFromLocation</code>.</p>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="../../android/data-storage/" title="5. Data Storage: File/Network"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="../../android/security/" title="7. Security By Design" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="../../js/clipboard.min.js?1676456832"></script>
    <script src="../../js/perfect-scrollbar.min.js?1676456832"></script>
    <script src="../../js/perfect-scrollbar.jquery.min.js?1676456832"></script>
    <script src="../../js/jquery.sticky.js?1676456832"></script>
    <script src="../../js/featherlight.min.js?1676456832"></script>
    <script src="../../js/modernizr.custom-3.6.0.js?1676456832"></script>
    <script src="../../js/learn.js?1676456832"></script>
    <script src="../../js/hugo-learn.js?1676456832"></script>
    
        
            <script src="../../mermaid/mermaid.js?1676456832"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

